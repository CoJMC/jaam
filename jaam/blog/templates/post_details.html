{% extends "base.html" %}
{% load comments %}

{% block title %}
Post Details
{% endblock %}

{% block content %}
<h2>Headline: {{post.headline}} </h2>
<h3>By: {{post.author}} </h3>
<h3>From Blog: {{post.blog}} </h3>
<h3>Description: {{post.description}} </h3>
<br/>
<h3>Body: <br /> {{post.body}} </h3>

<h1> Comments </h1>
{% get_comment_count for post as comment_count %}
<p>{{ comment_count }} comments have been posted. </p>

{% render_comment_list for post %}

{% if user.is_authenticated %}
{% with post.get_absolute_url as next %}
{% get_comment_form for post as form %}
<form action="{% comment_form_target %}" method="POST">
{% csrf_token %}
{{ form.comment }}
<div id="honeypotField">
{{ form.honeypot }}
</div>
{{ form.content_type }}
{{ form.object_pk }}
{{ form.timestamp }}
{{ form.security_hash }}
<br />
<input name="next" type="hidden" value="{{ next }}" />
<input type ="submit" value="Add Comment" id="id_submit" />
</form>
{% endwith %}

{% else %}
    <p> Please <a href="http://127.0.0.1:8000/admin/">login</a> to post a comment. </p>
{% endif %}

{% endblock %}


