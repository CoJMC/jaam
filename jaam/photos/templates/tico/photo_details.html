{% load comments %}
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="stylesheet" href="http://twitter.github.com/bootstrap/1.4.0/bootstrap.min.css">
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>

<div class="topbar">
    <div class="fill">
        <div class="container">
            <h2 style="color: white;">jaam &gt;&gt; {{photo.project.title}} &gt;&gt; {{photo.title}}</h2>
        </div>
    </div>
</div>

<div class="container" style="margin-top: 3em">
<div class="row">
    <div class="span10">
    <h2>{{photo.title}}</h2>
    by {{photo.journalist}}
    <span>{{photo.caption}} </span>

    <h3>Tags: {{photo.tags.all|join:','}} </h3>


    <ul><img id="the_photo" height="300px" width="300px" src="{{photo.image.url}}" alt="{{photo.image}}"/></ul>
    <script>
     jQuery('#the_photo').bind("swipeleft", function() {
        window.location = "{{ photo.get_next_by_created_at.get_absolute_url}}"
     });

     jQuery('#the_photo').bind("swiperight", function() {
        window.location = "{{ photo.get_previous_by_created_at.get_absolute_url}}"
     });
    </script>

        <a onclick="document.getElementById('exif_data').style.display = 'block'; this.innerHTML = 'Hide exif data'">Show exif data</a>
        <div id="exif_data" style="display: none">
        <h5>Exif Data </h5>
            <h6> Camera Manufacturer: {{photo.exif_data.camera_manufacturer}}</h6>
            <h6> Model: {{photo.exif_data.camera_model}}</h6>
            <h6> Date Taken: {{photo.exif_data.date}}</h6>
            <h6> Shutter Speed: {{photo.exif_data.camera_manufacturer}}</h6>
            <h6> Fnumber:{{photo.exif_data.camera_manufacturer}}</h6>
            <h6> Focal Length: {{photo.exif_data.focal_length}}</h6>
            <h6> Flash? {{photo.exif_data.flash_used}}</h6>
            <h6> Height: {{photo.exif_data.height_dimension}}</h6>
            <h6> Width: {{photo.exif_data.width_dimension}}</h6>
            <h6> GPS lat: {{photo.exif_data.gps_latitude}}</h6>
            <h6> GPS long: {{photo.exif_data.gps_longitude}}</h6>
            <h6> Altitude: {{photo.exif_data.altitude}}</h6>
        </div>
    </div>
    <div class="span6">

        <h1> Comments </h1>
        {% get_comment_count for photo as comment_count %}
        <p>{{ comment_count }} comments have been posted. </p>

        {% render_comment_list for photo %}

        {% if user.is_authenticated %}
        {% with photo.get_absolute_url as next %}
        {% get_comment_form for photo as form %}
        <form action="{% comment_form_target %}" method="POST">
        {% csrf_token %}
        {{ form.comment }}
        <p>This is the honeypot field. Don't enter anything, we will hide it later with CSS. </p>
        {{ form.honeypot }}
        {{ form.content_type }}
        {{ form.object_pk }}
        {{ form.timestamp }}
        {{ form.security_hash }}
        <br />
        <input name="next" type="hidden" value="{{ next }}" />
        <input type ="submit" value="Add Comment" id="id_submit" />
        </form>
        {% endwith %}

        {% else %}
            <p> Please <a href="http://127.0.0.1:8000/admin/">login</a> to post a comment. </p>
        {% endif %}
    </span>
</div>
</div>
